<!--filter-->
<personnel-filter [controller]="Controller" (onFilter)="onFilter($event)" >
</personnel-filter>

<mat-card appearance="outlined" style="min-height: 372px" *ngIf="showSelectPerson">
  <mat-tab-group dir="rtl" (selectedTabChange)="closeForm($event)">

    <mat-tab dir="rtl" label="ماموریت  هر فرد">
      <ng-template matTabContent>
        <!--select person-->
        <select-personnel [personData]="personData" [controller]="Controller" [setPersonPID]="setPID" [hideFilter]="true" [multiple]="canAdd"
          (rowClicked)="onSelectPersonnel($event)" (rowSelectedList)="rowSelectedList($event)"
          (selectedPersonelNF)="selectedPersonelNF = $event">
        </select-personnel>
        <div class="person-mission-tab" *ngIf="showGrid" style="min-height: 329px">
          <mat-tab-group dir="rtl" (selectedTabChange)="closeForm()">

            <mat-tab dir="rtl" label="ماموریت  هر فرد">
              <ng-template matTabContent>
                <!--main grid-->
                <custom-ag-grid *ngIf="showGeneralPerson" [customGridOption]="gridOption"></custom-ag-grid>
              </ng-template>
            </mat-tab>

            <mat-tab dir="rtl" label="کاردکس ماموریت">
              <ng-template matTabContent>
                <cardex-person [option]="cardexOptions"></cardex-person>
              </ng-template>
            </mat-tab>

          </mat-tab-group>
        </div>
      </ng-template>
    </mat-tab>

    <mat-tab dir="rtl" style="min-height: 372px" label="اطلاعات ماموریت ماه جاری">
      <ng-template matTabContent>
        <!--general-->
        <general-person-info [filterData]="filterDto" [type]="Controller" (edited)="onMultiEdit($event)"
          [calEdit]="canEdit" [canDelete]="canDelete" >
        </general-person-info>
      </ng-template>
    </mat-tab>
    <mat-tab dir="rtl" style="min-height: 372px" label="اطلاعات ماموریت سال جاری">
      <ng-template matTabContent>
        <custom-ag-grid *ngIf="showThisYearMission" [rowNumber]="30" [customGridOption]="gridOptionThisYear"></custom-ag-grid>
      </ng-template>
    </mat-tab>

  </mat-tab-group>
</mat-card>

<div class="pre-form" *ngIf="showForm">
  <person-mission-info-form [formObj]="formObj" [ID]="ID" [PID]="PID" [formType]="formType" (done)="submited($event)"
    (closed)="closeForm(3)" [personList]="selectedPersonList" [idList]="selectedIdList"
    [selectedPersonelNF]="selectedPersonelNF">
  </person-mission-info-form>
</div>